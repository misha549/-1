<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>
<header>
  <div class="logo">üçï Sushi&amp;Pizza</div>
  <div class="cart">
  </div>
</header>

<div class="cart-page">
  <h2>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
  <ul id="cart-items" class="cart-items"></ul>
  <div class="cart-summary">
    <input type="text" id="user-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
    <div class="total">–ò—Ç–æ–≥–æ: <span id="cart-sum">0 ‚ÇΩ</span></div>
    <button id="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>
</div>

<script>
  const items = JSON.parse(localStorage.getItem("cart") || "[]");
  const list = document.getElementById("cart-items");
  const sumElem = document.getElementById("cart-sum");

  let total = 0;
  items.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.name} ‚Äî ${item.price.toLocaleString('ru-RU')} ‚ÇΩ`;
    list.appendChild(li);
    total += item.price;
  });
  sumElem.textContent = `${total.toLocaleString('ru-RU')} ‚ÇΩ`;

  document.getElementById("checkout-btn").addEventListener("click", () => {
    const name = document.getElementById("user-name").value.trim();
    if (!name) {
      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è.");
      return;
    }
alert("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ –±–æ—Ç–∞...");

Telegram.WebApp.sendData(JSON.stringify({
  name,
  items,
  total
}));
    // ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ Telegram WebApp
    if (window.Telegram && Telegram.WebApp) {
      Telegram.WebApp.sendData(JSON.stringify({
        name,
        items,
        total
      }));
    }

    // ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥
    alert(`–°–ø–∞—Å–∏–±–æ, ${name}! –í–∞—à –∑–∞–∫–∞–∑ –Ω–∞ —Å—É–º–º—É ${total.toLocaleString('ru-RU')} ‚ÇΩ –æ—Ñ–æ—Ä–º–ª–µ–Ω.`);
    localStorage.removeItem("cart");
    localStorage.removeItem("cartTotal");
    location.href = "index.html";
  });
</script>

<!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
<!-- üîΩ –°–¢–ò–õ–ò –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é -->
<!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
<!-- üîΩ –°–¢–ò–õ–ò –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é -->
<style>
  .bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    padding-bottom: env(safe-area-inset-bottom);
    height: calc(64px + env(safe-area-inset-bottom));
    background: #fff;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 1000;
    box-sizing: border-box;
  }

  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #666;
    background: none;
    border: none;
    flex: 1;
    padding: 6px 0;
    cursor: pointer;
    position: relative;
    transition: color 0.2s ease;
  }

  .nav-icon {
    font-size: 20px;
  }

  .nav-item.active,
  .nav-item:hover {
    color: #c90000;
    font-weight: bold;
  }

  .nav-item::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    width: 24px;
    height: 3px;
    border-radius: 2px;
    background-color: #c90000;
    transition: transform 0.3s ease;
  }

  .nav-item.active::after {
    transform: translateX(-50%) scaleX(1);
  }

  .cart-btn {
    position: relative;
  }

  .cart-badge {
    position: absolute;
    top: 2px;
    right: 22px;
    background: #c90000;
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 50%;
    display: none;
  }
</style>

<!-- üîΩ HTML —Å–∞–º–æ–≥–æ –º–µ–Ω—é -->
<nav class="bottom-nav">
  <button class="nav-item" data-page="promo">
    <span class="nav-icon">%</span>
    <span class="nav-label">–ê–∫—Ü–∏–∏</span>
  </button>
  <button class="nav-item" data-page="menu">
    <span class="nav-icon">ü•§</span>
    <span class="nav-label">–ú–µ–Ω—é</span>
  </button>
  <button class="nav-item cart-btn" data-page="cart">
    <span class="nav-icon">üõçÔ∏è</span>
    <span class="nav-label">–ö–æ—Ä–∑–∏–Ω–∞</span>
    <span class="cart-badge" id="cart-count">0</span>
  </button>
  <button class="nav-item" data-page="profile">
    <span class="nav-icon">üë§</span>
    <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
  </button>
  <button class="nav-item" data-page="more">
    <span class="nav-icon">‚ãØ</span>
    <span class="nav-label">–ï—â—ë</span>
  </button>
</nav>

<!-- üîΩ –õ–û–ì–ò–ö–ê —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫ -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    let currentPage = 'menu';
const path = location.pathname.split('/').pop(); // –ø–æ–ª—É—á–∞–µ–º –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞

switch (path) {
  case 'index.html':
  case '': // –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –∫–∞–∫ /
    currentPage = 'menu';
    break;
  case 'cart.html':
    currentPage = 'cart';
    break;
  case 'promo.html':
    currentPage = 'promo';
    break;
  case 'profile.html':
    currentPage = 'profile';
    break;
  case 'more.html':
    currentPage = 'more';
    break;
}


    document.querySelectorAll('.bottom-nav .nav-item').forEach(btn => {
      const page = btn.dataset.page;
      btn.classList.toggle('active', page === currentPage);

      btn.addEventListener('click', () => {
        document.querySelectorAll('.bottom-nav .nav-item').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

switch (page) {
  case 'menu': location.href = 'index.html'; break;
  case 'cart': location.href = 'cart.html'; break;
  case 'promo': location.href = 'promo.html'; break;
  case 'profile': location.href = 'profile.html'; break;
  case 'more': location.href = 'more.html'; break;


        }
      });
    });
  });
</script>

</body>
</html>
